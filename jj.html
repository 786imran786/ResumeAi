<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ResumeIQ | Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #111111;
            --bg-tertiary: #1a1a1a;
            --accent-primary: #3b82f6;
            --accent-secondary: #1e40af;
            --accent-glow: rgba(59, 130, 246, 0.3);
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --text-muted: #64748b;
            --border-color: #2d3748;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --card-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            --card-glow: 0 0 20px rgba(59, 130, 246, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .app {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, var(--bg-secondary) 0%, rgba(17, 17, 17, 0.9) 100%);
            border-right: 1px solid var(--border-color);
            padding: 2rem 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
            position: relative;
            z-index: 10;
            backdrop-filter: blur(10px);
        }

        .logo {
            font-weight: 700;
            font-size: 1.5rem;
            margin-bottom: 2rem;
            padding: 0 1rem;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
        }

        .logo:after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 1rem;
            width: 30px;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 3px;
        }

        .nav-btn {
            width: 100%;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
            border: none;
            background: transparent;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .nav-btn:hover, .nav-btn.active {
            background: linear-gradient(90deg, rgba(59, 130, 246, 0.1), rgba(30, 64, 175, 0.05));
            color: var(--text-primary);
            transform: translateX(5px);
        }

        .nav-btn.active:before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 4px;
            background: linear-gradient(180deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 0 4px 4px 0;
        }

        .avatar {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            color: var(--bg-primary);
            font-weight: bold;
            margin-bottom: 0.5rem;
            border: 2px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .user_name {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-primary);
            text-align: center;
        }

        /* Main Content */
        .main {
            flex: 1;
            padding: 2rem;
            background: radial-gradient(circle at 10% 20%, rgba(59, 130, 246, 0.05) 0%, transparent 20%), 
                        radial-gradient(circle at 90% 80%, rgba(30, 64, 175, 0.05) 0%, transparent 20%);
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            position: relative;
        }

        .title {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(90deg, var(--text-primary), var(--accent-primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            position: relative;
        }

        .title:after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 3px;
        }

        .actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 500;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            text-decoration: none;
            gap: 0.5rem;
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
            color: white;
            box-shadow: 0 4px 12px var(--accent-glow);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px var(--accent-glow);
        }

        /* Dashboard Layout */
        .card-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .panel {
            background: linear-gradient(145deg, var(--bg-secondary), var(--bg-tertiary));
            border-radius: 16px;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: var(--card-shadow), var(--card-glow);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .panel:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.6), 0 0 25px rgba(59, 130, 246, 0.15);
        }

        .panel:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--accent-primary), transparent);
        }

        .metrics {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        /* ATS Score */
        .ats {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
        }

        .ats svg {
            width: 200px;
            height: 200px;
            filter: drop-shadow(0 0 10px rgba(59, 130, 246, 0.3));
        }

        .score {
            text-align: center;
            margin-top: 1rem;
        }

        .score .num {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-primary);
            text-shadow: 0 0 10px rgba(59, 130, 246, 0.3);
        }

        .score .sub {
            font-size: 1rem;
            color: var(--text-muted);
        }

        /* Progress Bars */
        .progress-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .label {
            width: 140px;
            font-weight: 600;
        }

        .bar {
            background-color: var(--bg-tertiary);
            height: 12px;
            border-radius: 8px;
            flex: 1;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .bar > i {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            border-radius: 8px;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
            transition: width 1s ease-in-out;
        }
.resume-preview-section iframe {
    transition: opacity 0.3s ease;
}
.resume-preview-section iframe:hover {
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
}

        /* Donut Chart */
        .donut-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .donut {
            width: 120px;
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            filter: drop-shadow(0 0 8px rgba(59, 130, 246, 0.3));
        }

        .donut .num {
            position: absolute;
            font-weight: 700;
            font-size: 1.25rem;
        }

        .donut-description {
            color: var(--text-muted);
            max-width: 200px;
            font-size: 0.875rem;
        }

        /* Mini Gauges */
        .bottom-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .mini-gauge {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .mini-gauge svg {
            width: 120px;
            height: 60px;
        }

        .mini-gauge-value {
            font-weight: 700;
            font-size: 1.5rem;
        }

        /* Suggestions */
        .suggestions {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-top: 1rem;
        }

        .suggestion {
            padding: 1rem;
            border-radius: 12px;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(30, 64, 175, 0.05));
            border: 1px solid rgba(59, 130, 246, 0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .suggestion:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.2);
        }

        .suggestion:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, var(--accent-primary), var(--accent-secondary));
        }

        .suggestion h4 {
            margin: 0 0 0.5rem 0;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .suggestion p {
            margin: 0;
            color: var(--text-muted);
            font-size: 0.75rem;
            line-height: 1.4;
        }

        /* Resume Preview */
        .resume-preview {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 999px;
            background: linear-gradient(90deg, var(--bg-tertiary), rgba(59, 130, 246, 0.1));
            font-weight: 600;
            color: var(--text-muted);
            font-size: 0.75rem;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .rp-line {
            height: 10px;
            background: linear-gradient(90deg, var(--bg-tertiary), rgba(59, 130, 246, 0.1));
            border-radius: 6px;
            position: relative;
            overflow: hidden;
        }

        .rp-line:after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .keywords {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .keyword {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 6px;
            background: linear-gradient(90deg, rgba(59, 130, 246, 0.1), rgba(30, 64, 175, 0.05));
            font-weight: 500;
            color: var(--accent-primary);
            font-size: 0.7rem;
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        /* Resume Preview Section */
.resume-preview-section {
    margin-top: 1.5rem;
    width: 100%;
    height: 100vh; /* full viewport height */
}

#userResumePreview {
    background-color: var(--bg-tertiary);
    border: 1px solid rgba(255, 255, 255, 0.05);
    border-radius: 12px;
    padding: 0;
    height: 100%;
    width: 100%;
    overflow: hidden;
    box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.3);
}


        /* New Analysis Features */
        .analysis-features {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .feature-card {
            padding: 1rem;
            border-radius: 12px;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.05), rgba(30, 64, 175, 0.02));
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .feature-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .feature-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 6px;
            color: white;
            font-size: 0.75rem;
        }

        .feature-title {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .feature-content {
            color: var(--text-muted);
            font-size: 0.8rem;
            line-height: 1.4;
        }

        .feature-value {
            font-weight: 700;
            font-size: 1.1rem;
            margin-top: 0.5rem;
            color: var(--text-primary);
        }

        /* Job Matching Section */
        .job-matching {
            margin-top: 1.5rem;
        }

        .job-cards {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-top: 1rem;
        }

        .job-card {
            padding: 1rem;
            border-radius: 12px;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.05), rgba(30, 64, 175, 0.02));
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }

        .job-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .job-title {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .job-match {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .match-bar {
            flex: 1;
            height: 6px;
            background-color: var(--bg-tertiary);
            border-radius: 3px;
            overflow: hidden;
        }

        .match-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 3px;
        }

        .match-percent {
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--text-muted);
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .card-grid {
                grid-template-columns: 1fr;
            }
            
            .metrics {
                grid-template-columns: 1fr;
            }
            
            .suggestions {
                grid-template-columns: 1fr;
            }
            
            .bottom-row {
                grid-template-columns: 1fr;
            }
            
            .analysis-features {
                grid-template-columns: 1fr;
            }
            
            .job-cards {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .app {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                flex-direction: row;
                justify-content: space-between;
                padding: 1rem;
            }
            
            .nav-btn {
                width: auto;
                flex-direction: column;
                padding: 0.5rem;
            }
            
            .avatar-container {
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            
            .user_name {
                display: none;
            }
            
            .main {
                padding: 1rem;
            }
        }
        /* === Job Match Section Styling === */
#jobDesc {
  width: 100%;
  min-height: 160px;
  padding: 14px 18px;
  border-radius: 12px;
  border: 1.5px solid #555;
  background: #1c1c1c;
  color: #f5f5f5;
  font-size: 1rem;
  font-family: 'Poppins', sans-serif;
  outline: none;
  resize: vertical;
  transition: all 0.3s ease;
  box-shadow: inset 0 0 8px rgba(255, 255, 255, 0.05);
}

#jobDesc:focus {
  border-color: #00c2ff;
  box-shadow: 0 0 12px rgba(0, 194, 255, 0.4);
}

/* Analyze Button */
#analyzeJob {
  display: inline-block;
  margin-top: 14px;
  padding: 12px 26px;
  border: none;
  border-radius: 10px;
  background: linear-gradient(135deg, #00c2ff, #0078ff);
  color: #fff;
  font-size: 1rem;
  font-weight: 600;
  letter-spacing: 0.5px;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(0, 194, 255, 0.3);
}

#analyzeJob:hover {
  background: linear-gradient(135deg, #0078ff, #00c2ff);
  transform: translateY(-2px);
  box-shadow: 0 6px 18px rgba(0, 194, 255, 0.4);
}

/* Result Section */
#matchResult {
  margin-top: 24px;
  padding: 18px 22px;
  border-radius: 12px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  color: #e4e4e4;
  font-family: 'Poppins', sans-serif;
  line-height: 1.6;
  box-shadow: 0 0 15px rgba(0, 194, 255, 0.1);
  animation: fadeIn 0.4s ease forwards;
}

/* Fade-in animation for result */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

    </style>
</head>
<body>
    <div class="app">
        <aside class="sidebar">
            <div class="avatar-container">
                <div id="user-avatar" class="avatar">
                    <i class="fas fa-user"></i>
                </div>
                <span id="user-name" class="user_name">User</span>
            </div>
            <button class="nav-btn" title="Upload">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M17 8L12 3L7 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M12 3V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Upload</span>
            </button>
            <button class="nav-btn active" title="Dashboard">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M9 22V12H15V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Dashboard</span>
            </button>
            <button class="nav-btn" title="Reports">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 17V15M12 17V13M15 17V11M5 21H19C19.5304 21 20.0391 20.7893 20.4142 20.4142C20.7893 20.0391 21 19.5304 21 19V5C21 4.46957 20.7893 3.96086 20.4142 3.58579C20.0391 3.21071 19.5304 3 19 3H5C4.46957 3 3.96086 3.21071 3.58579 3.58579C3.21071 3.96086 3 4.46957 3 5V19C3 19.5304 3.21071 20.0391 3.58579 20.4142C3.96086 20.7893 4.46957 21 5 21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Reports</span>
            </button>
            <button class="nav-btn" title="Settings">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M19.4 15C19.2669 15.3031 19.1338 15.6062 19.0006 15.9094C18.5297 16.9078 17.9584 17.857 17.295 18.7438C16.3344 20.0281 15.1875 21.15 13.8938 22.0688C12.6 22.9875 11.175 23.6906 9.675 24.15C9.225 24.2906 8.76844 24.4125 8.30625 24.5156C7.545 24.7031 6.9375 23.9906 7.05938 23.2312C7.17422 22.5117 7.2525 21.7861 7.29375 21.0577C7.33125 20.4033 6.84375 19.8347 6.1875 19.7812C5.0625 19.6875 3.98438 19.3594 3 18.75C2.19375 18.2531 1.49062 17.5906 0.9375 16.8094C0.6375 16.3875 0.375 15.9375 0.15 15.4688C-0.31875 14.4844 0.459375 13.4437 1.49625 13.5844C2.39156 13.7062 3.2625 13.9406 4.0875 14.2781C4.85625 14.5922 5.3625 15.3469 5.33438 16.1719C5.35172 16.6078 5.33016 17.0442 5.26992 17.4764C5.21719 17.8519 5.59031 18.1312 5.94375 18.0281C7.15969 17.6578 8.32172 17.1203 9.39375 16.4316C10.6125 15.6516 11.5219 14.4469 11.9438 13.0406C12.1406 12.3844 12.2438 11.7 12.2438 11.0062C12.2438 9.52828 11.6555 8.11071 10.6069 7.06213C9.55835 6.01355 8.14078 5.42531 6.66281 5.42531C5.89359 5.42531 5.13422 5.57109 4.425 5.85375C3.90938 6.05625 3.43125 6.32812 3 6.65906C2.39062 7.13438 1.52812 6.95625 1.19062 6.2625C0.853125 5.56875 1.17188 4.74375 1.86562 4.40625C2.55938 4.06875 3.38438 4.3875 3.8625 4.9125C4.125 5.20312 4.41562 5.46797 4.72969 5.70234C5.68594 5.28656 6.71836 5.06783 7.7625 5.06016C8.99062 5.06016 10.1812 5.36719 11.25 5.94844C12.3188 6.52969 13.2281 7.36758 13.8941 8.38641C14.5602 9.40523 14.9625 10.5738 15.0656 11.7877C15.1688 13.0016 14.9695 14.2239 14.4844 15.3488C14.2969 15.7852 14.7188 16.2216 15.1688 16.0688C16.3219 15.6797 17.3906 15.0703 18.3219 14.2781C18.9281 13.7719 19.4719 13.1906 19.9406 12.5469C20.4094 11.9031 20.4844 11.0625 20.1281 10.35C19.7719 9.6375 19.0312 9.1875 18.2219 9.1875C17.7188 9.1875 17.2406 9.375 16.8844 9.70312C16.5281 10.0312 16.3219 10.4738 16.3125 10.9406C16.3125 11.2734 16.4156 11.5969 16.6031 11.8688C16.7906 12.1406 17.0531 12.3469 17.3531 12.4594C17.6531 12.5719 17.975 12.5844 18.2812 12.4953C18.5875 12.4062 18.8625 12.2203 19.0656 11.9625C19.2688 11.7047 19.3894 11.3883 19.4109 11.0564C19.4325 10.7245 19.354 10.3941 19.1859 10.1086C19.0178 9.82303 18.7684 9.59578 18.4699 9.45656C18.1714 9.31734 17.8377 9.27281 17.5125 9.32812C17.4562 9.3375 17.3984 9.3375 17.3422 9.32812C16.9031 9.2625 16.5281 8.9625 16.3781 8.55C16.2281 8.1375 16.3312 7.68164 16.6406 7.37109C17.4188 6.59297 18.375 6.02016 19.4281 5.70047C20.4812 5.38078 21.6 5.32359 22.6819 5.53359C23.7638 5.74359 24.7766 6.21422 25.6312 6.90375C26.4859 7.59328 27.1562 8.48016 27.5812 9.48375C28.0062 10.4873 28.1733 11.5767 28.0687 12.6562C27.9641 13.7358 27.5911 14.7727 26.9812 15.668C26.3714 16.5633 25.5431 17.2894 24.5681 17.7797C23.5931 18.27 22.5023 18.5086 21.4031 18.4725C20.8594 18.4547 20.4375 18.9844 20.5688 19.5094C20.7 20.0344 21.3375 20.3156 21.8438 20.4562C23.3438 20.8688 24.9469 20.7281 26.3531 20.0625C27.7594 19.3969 28.875 18.2531 29.4844 16.8469C30.0938 15.4406 30.15 13.875 29.6438 12.4312C29.1375 10.9875 28.1062 9.76875 26.7375 9.01078C25.3687 8.25281 23.7656 8.01047 22.2281 8.32547C20.6906 8.64047 19.3406 9.49078 18.4219 10.7062C18.0656 11.1937 17.8125 11.7469 17.6766 12.3314C17.5406 12.9159 17.5247 13.5197 17.6297 14.1094C17.7347 14.6991 17.9584 15.2625 18.287 15.7659C18.6156 16.2694 19.0422 16.7025 19.5412 17.0391C20.0402 17.3756 20.6016 17.6086 21.1922 17.7244C21.7828 17.8402 22.3906 17.8363 22.9795 17.7129C23.5684 17.5895 24.1266 17.349 24.6202 17.0044C25.1138 16.6598 25.5328 16.2179 25.8525 15.7055C26.1722 15.1931 26.3859 14.6203 26.4816 14.0213C26.5772 13.4222 26.5528 12.8094 26.4099 12.2194C26.267 11.6294 26.0088 11.0742 25.65 10.5877C25.2912 10.1012 24.8391 9.69328 24.3211 9.38859C23.8031 9.08391 23.2303 9.08891 22.6375 9.81531C22.0447 9.74172 21.4444 9.79103 20.8734 9.95969C20.3025 10.1283 19.7733 10.4125 19.3203 10.7936C18.8672 11.1747 18.5008 11.6444 18.2438 12.1727C17.9867 12.7009 17.8447 13.2766 17.8266 13.8625C17.8084 14.4484 17.9145 15.0316 18.1378 15.5744C18.361 16.1172 18.6966 16.6078 19.1227 17.0153C19.5488 17.4227 20.0559 17.7383 20.6119 17.942C21.1679 18.1457 21.7604 18.2328 22.3519 18.1984C22.9434 18.1641 23.5211 18.0091 24.0484 17.7433C24.5756 17.4775 25.0406 17.1067 25.4123 16.6547C25.7841 16.2027 26.0541 15.6794 26.2045 15.1197C26.3549 14.56 26.3822 13.9766 26.2844 13.4064C26.1867 12.8362 25.9662 12.2922 25.6375 11.8112C25.3087 11.3303 24.8794 10.9234 24.3781 10.6187C23.8769 10.3141 23.3156 10.1186 22.7312 10.0455C22.1469 9.97234 21.5531 10.0234 20.9906 10.1955C20.9906 10.1955 20.9906 10.1955 20.9906 10.1955" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Settings</span>
            </button>
        </aside>

        <main class="main">
            <div class="header">
                <h1 class="title">Resume Analyzer</h1>
                <div class="actions">
                    <button class="btn btn-primary" id="uploadBtn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M17 8L12 3L7 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M12 3V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Upload Resume
                    </button>
                </div>
            </div>

            <div class="card-grid">
                <section class="panel">
                    <div class="metrics">
<div class="ats panel">
    <svg id="atsChart" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
        <defs>
            <linearGradient id="g1" x1="0%" x2="100%">
                <stop offset="0%" stop-color="var(--accent-primary)" />
                <stop offset="100%" stop-color="var(--accent-secondary)" />
            </linearGradient>
        </defs>
        <circle cx="60" cy="60" r="48" stroke="var(--border-color)" stroke-width="12" fill="none"/>
        <circle id="atsArc" cx="60" cy="60" r="48" stroke="url(#g1)" stroke-width="12" stroke-linecap="round" fill="none" transform="rotate(-90 60 60)" stroke-dasharray="0 1000"/>
    </svg>

    <!-- Center content -->
    <div class="score">
        <div class="num" id="atsNum">--</div>
        <div class="sub">/100</div>
    </div>

    <!-- NEW center text -->
    <div class="center-text">ATS Score</div>
</div>


                        <div class="right-metrics">
                            <div class="progress-row">
                                <div class="label">Keyword Match</div>
                                <div style="flex:1;display:flex;align-items:center;gap:12px">
                                    <div class="bar"><i id="kwBar"></i></div>
                                    <div class="label" style="width:60px;text-align:right" id="kwVal">--%</div>
                                </div>
                            </div>

                            <div style="display:flex;align-items:center;justify-content:space-between">
                                <div>
                                    <div style="font-weight:700">Resume Strength</div>
                                    <div class="donut-container">
                                        <div class="donut">
                                            <svg viewBox="0 0 42 42" width="120" height="120">
                                                <circle cx="21" cy="21" r="15.9" fill="none" stroke="var(--border-color)" stroke-width="5" />
                                                <circle id="donutArc" cx="21" cy="21" r="15.9" fill="none" stroke="url(#g1)" stroke-width="5" stroke-linecap="round" transform="rotate(-90 21 21)" stroke-dasharray="0 100"/>
                                            </svg>
                                            <div class="num" id="donutNum">--%</div>
                                        </div>
                                        <div class="donut-description">High level resume strength computed from skills, experience, keywords and formatting.</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bottom-row">
                        <div class="panel">
                            <div style="font-weight:700;margin-bottom:8px">Grammar Accuracy</div>
                            <div class="mini-gauge">
                                <svg viewBox="0 0 100 50">
                                    <path id="g1path" d="M10 40 C30 10,70 10,90 40" stroke-opacity="0.15" stroke-width="6" stroke="white" fill="none" stroke-linecap="round"/>
                                </svg>
                                <div class="mini-gauge-value" id="gramVal">--%</div>
                            </div>
                        </div>

                        <div class="panel">
                            <div style="font-weight:700;margin-bottom:8px">Formatting Quality</div>
                            <div class="mini-gauge">
                                <svg viewBox="0 0 100 50">
                                    <path d="M10 40 C30 10,70 10,90 40" stroke-opacity="0.15" stroke-width="6" stroke="white" fill="none" stroke-linecap="round"/>
                                </svg>
                                <div class="mini-gauge-value" id="fmtVal">--%</div>
                            </div>
                        </div>
                    </div>

                    <div style="margin-top:12px">
                        <div style="font-weight:700;margin-bottom:8px">Personalized Suggestions</div>
                        <div class="suggestions">
                            <div class="suggestion">
                                <h4>Missing Keywords</h4>
                                <p id="sugKw">Add role-specific keywords (e.g. "REST API", "Docker", "AWS") in Experience & Skills sections.</p>
                            </div>

                            <div class="suggestion">
                                <h4>Grammar Alerts</h4>
                                <p id="sugGram">We found a few punctuation and tense inconsistencies. Fix these to improve readability.</p>
                            </div>

                            <div class="suggestion">
                                <h4>Design Hints</h4>
                                <p id="sugFmt">Use consistent spacing, remove extra lines, and use simple bullet points for achievements.</p>
                            </div>
                        </div>
                    </div>

                    <!-- New Analysis Features Section -->
                    <div class="analysis-features">
                        <div class="feature-card">
                            <div class="feature-header">
                                <div class="feature-icon">S</div>
                                <div class="feature-title">Skill Gap Analysis</div>
                            </div>
                            <div class="feature-content" id="skillGapContent">Analyzing required vs. present skills...</div>
                            <div class="feature-value" id="skillGapValue">--%</div>
                        </div>

                        <div class="feature-card">
                            <div class="feature-header">
                                <div class="feature-icon">E</div>
                                <div class="feature-title">Experience Level</div>
                            </div>
                            <div class="feature-content" id="expLevelContent">Based on roles and duration...</div>
                            <div class="feature-value" id="expLevelValue">--</div>
                        </div>

                        <div class="feature-card">
                            <div class="feature-header">
                                <div class="feature-icon">R</div>
                                <div class="feature-title">Readability Score</div>
                            </div>
                            <div class="feature-content" id="readabilityContent">Evaluating sentence structure and complexity...</div>
                            <div class="feature-value" id="readabilityValue">--/10</div>
                        </div>

                        <div class="feature-card">
                            <div class="feature-header">
                                <div class="feature-icon">A</div>
                                <div class="feature-title">Achievement Impact</div>
                            </div>
                            <div class="feature-content" id="achievementContent">Quantifying results and accomplishments...</div>
                            <div class="feature-value" id="achievementValue">--%</div>
                        </div>
                    </div>
                </section>

                <aside class="right-col">
                    <div class="panel resume-preview">
                        <div class="preview-header">
                            <div id="user-name" style="font-weight:800"></div>
                            <div class="badge">ATS: <span id="miniAts">--</span>/100</div>
                        </div>
                        <div  id="title_ai">Loading .....</div>
                        <div >Experience</div>
                        <div style="color:var(--text-muted);line-height:1.5" id="EXP">Loading .....</div>
         
                        <div>Formatting</div>
                        <div style="color:var(--text-muted);line-height:1.5" id="formating_ai">Loading ...</div>
                        <div style="margin-top:12px;color:var(--text-muted)">Detected Keywords</div>
                        <div class="keywords" id="keywordsContainer">

                        </div>
                    </div>

                    <div class="panel">
                        <div style="font-weight:700;margin-bottom:8px">Summary</div>
                        <div style="color:var(--text-muted);line-height:1.5" id="summaryText">This resume is well-structured with a strong skills section but needs slight formatting and keyword additions for specific job descriptions. Consider tailoring the summary and adding measurable results in achievements.</div>
                        <div style="margin-top:12px;display:flex;justify-content:space-between;align-items:center">
                            <div style="color:var(--text-muted)">Last scanned</div>
                            <div style="font-weight:700" id="lastScanned">Oct 15, 2025</div>
                        </div>
                    </div>

                    <!-- Job Matching Section -->
                    <div class="panel job-matching">
                        <div style="font-weight:700;margin-bottom:8px">Recommended Job Matches</div>
                        <div class="job-cards">
                            <div class="job-card">
                                <div class="job-title">Frontend Developer</div>
                                <div class="job-match">
                                    <div class="match-bar">
                                        <div class="match-fill" style="width: 78%"></div>
                                    </div>
                                    <div class="match-percent">78%</div>
                                </div>
                            </div>
                            
                            <div class="job-card">
                                <div class="job-title">Full Stack Engineer</div>
                                <div class="job-match">
                                    <div class="match-bar">
                                        <div class="match-fill" style="width: 92%"></div>
                                    </div>
                                    <div class="match-percent">92%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="panel job-matching">
<textarea id="jobDesc" placeholder="Paste job description here..."></textarea>
<button id="analyzeJob">Analyze Match</button>
<div id="matchResult"></div>
                    </div>
                </aside>
            </div>


            <div class="panel resume-preview-section">
                <div style="font-weight:700; margin-bottom:8px;">Uploaded Resume Preview</div>
                <div id="userResumePreview">No resume uploaded yet.</div>
            </div>
        </main>
    </div>

<script>
document.getElementById('analyzeJob').addEventListener('click', async () => {
  const jobDesc = document.getElementById('jobDesc').value.trim();
  const resumeId = new URLSearchParams(window.location.search).get('resume_id');

  if (!jobDesc) {
    alert("‚ö†Ô∏è Please paste a job description before analyzing!");
    return;
  }

  const response = await fetch('http://127.0.0.1:5000/job-match', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    credentials: 'include',
    body: JSON.stringify({
      job_description: jobDesc,
      resume_id: resumeId
    })
  });

  const data = await response.json();
  console.log(data); // üëÄ log this

  if (data.error) {
    document.getElementById('matchResult').innerHTML = `<p style="color:red;">${data.error}</p>`;
    return;
  }

  document.getElementById('matchResult').innerHTML = `
    <h3>üéØ Job Match Score: ${data.match_score}%</h3>
    <p><strong>Missing Keywords:</strong> ${data.missing_keywords.join(', ')}</p>
    <p>${data.summary}</p>
  `;
});


</script>
    <script>
        // All backend logic preserved exactly as in the original code
        const uploadBtn = document.getElementById('uploadBtn');
        const userResumePreview = document.getElementById('userResumePreview');

        // Elements for updating dashboard
        const atsNum = document.getElementById('atsNum');
        const miniAts = document.getElementById('miniAts');
        const atsArc = document.getElementById('atsArc');

        const kwBar = document.getElementById('kwBar');
        const kwVal = document.getElementById('kwVal');

        const donutArc = document.getElementById('donutArc');
        const donutNum = document.getElementById('donutNum');

        const gramVal = document.getElementById('gramVal');
        const fmtVal = document.getElementById('fmtVal');

        const sugKw = document.getElementById('sugKw');
        const sugGram = document.getElementById('sugGram');
        const sugFmt = document.getElementById('sugFmt');

        // New elements for additional features
        const skillGapContent = document.getElementById('skillGapContent');
        const skillGapValue = document.getElementById('skillGapValue');
        const expLevelContent = document.getElementById('expLevelContent');
        const expLevelValue = document.getElementById('expLevelValue');
        const readabilityContent = document.getElementById('readabilityContent');
        const readabilityValue = document.getElementById('readabilityValue');
        const achievementContent = document.getElementById('achievementContent');
        const achievementValue = document.getElementById('achievementValue');
        const keywordsContainer = document.getElementById('keywordsContainer');
        const summaryText = document.getElementById('summaryText');
        const lastScanned = document.getElementById('lastScanned');
        const expSection = document.getElementById('EXP');
        const titleAI = document.getElementById('title_ai');
        const formatingAI = document.getElementById('formating_ai');
        // Utility functions
        function setATS(n) {
            const radius = 48;
            const circumference = 2 * Math.PI * radius;
            const dash = (Math.max(0, Math.min(100, n))/100) * circumference;
            atsArc.setAttribute('stroke-dasharray', `${dash} ${circumference - dash}`);
            atsNum.textContent = n;
            miniAts.textContent = n;
        }

        function setBar(el, pct){
            el.style.width = pct + '%';
            el.style.background = 'linear-gradient(90deg, var(--accent-primary), var(--accent-secondary))';
            return pct;
        }

        function setDonut(pct){
            const r=15.9; const circ = 2*Math.PI*r;
            const dash = (pct/100)*circ;
            donutArc.setAttribute('stroke-dasharray', `${dash} ${circ-dash}`);
            donutNum.textContent = pct + '%';
        }

        function setMini(el, pct){
            el.textContent = pct + '%';
        }

        // Upload handler
uploadBtn.addEventListener('click', async () => {
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = '.pdf,.doc,.docx,.txt';
    input.onchange = async e => {
        const file = e.target.files[0];
        if (!file) return;

        // Clear previous preview
        userResumePreview.innerHTML = '';

        // === PREVIEW LOGIC ===
        if (file.type === 'application/pdf') {
            // Create blob URL for the PDF
            const pdfURL = URL.createObjectURL(file);
            const iframe = document.createElement('iframe');
            iframe.src = pdfURL;
            iframe.style.width = '100%';
            iframe.style.height = '600px';
            iframe.style.border = '2px solid #ddd';
            iframe.style.borderRadius = '10px';
            iframe.style.boxShadow = '0 0 12px rgba(0,0,0,0.15)';
            userResumePreview.appendChild(iframe);
        } else if (file.type.includes('text')) {
            // Show text preview
            const reader = new FileReader();
            reader.onload = () => {
                const pre = document.createElement('pre');
                pre.textContent = reader.result.slice(0, 2000) + (reader.result.length > 2000 ? '\n...\n(Preview truncated)' : '');
                pre.style.whiteSpace = 'pre-wrap';
                pre.style.maxHeight = '600px';
                pre.style.overflowY = 'auto';
                pre.style.background = '#f9f9f9';
                pre.style.padding = '1rem';
                pre.style.borderRadius = '10px';
                pre.style.fontFamily = 'monospace';
                userResumePreview.appendChild(pre);
            };
            reader.readAsText(file);
        } else {
            userResumePreview.textContent = `Uploaded file: ${file.name}`;
        }

        // === UPLOAD TO BACKEND ===
        const formData = new FormData();
        formData.append('resume', file);

        try {
            const res = await fetch('http://127.0.0.1:5000/uploadresume', {
                method: 'POST',
                credentials: 'include',
                body: formData
            });
            const data = await res.json();
            if (data.error) {
                alert(`Error: ${data.error}`);
            } else {
                // Optional: show confirmation temporarily
                const msg = document.createElement('div');
                msg.textContent = '‚úÖ Resume uploaded successfully!';
                msg.style.color = 'green';
                msg.style.marginTop = '10px';
                userResumePreview.appendChild(msg);

                fetchLatestAnalysis();
            }
        } catch (err) {
            console.error(err);
            alert('Upload failed!');
        }
    };
    input.click();
});

        fetch("http://127.0.0.1:5000/user",{
            method: "GET",
            credentials: "include" 
        })
            .then(res => {
                if (!res.ok) {
                    throw new Error('Not logged in');
                }
                return res.json();
            })
            .then(data => {
                if (data.email) {
                    const avatar = document.getElementById('user-avatar');
                    const name = document.getElementById('user-name');
                    
                    if (data.picture) {
                        avatar.innerHTML = '';
                        const img = document.createElement('img');
                        img.src = data.picture;
                        img.alt = 'User Avatar';
                        img.className = 'avatar';
                        avatar.appendChild(img);
                    }
                    
                    if(name && data.name) name.textContent = data.name;
                } else {
                    console.log('No user data found');
                }
            })
            .catch(err => {
                console.log('User not logged in:', err);
                // No redirect since we're on dashboard
            });

        // Fetch latest analysis
  async function fetchLatestAnalysis() {
    try {
      const params = new URLSearchParams(window.location.search);
      const resumeId = params.get("resume_id");

      if (!resumeId) {
        alert("No resume ID provided!");
        return;
      }

      // Step 1: Get resume name from dashboard data
      const res = await fetch('http://127.0.0.1:5000/dashboard-data', {
        method: 'GET',
        credentials: 'include'
      });

      const data = await res.json();
      const analyses = data.analyses || [];
      const found = analyses.find(item => item.resume_id === resumeId);

      if (found) {
        const resumeName = found.resume_name;
        console.log("Resume name:", resumeName);
        await loadPDF(resumeName);
      } else {
        console.log("No matching resume found for ID:", resumeId);
      }

      // ‚úÖ Step 2: Fetch detailed analysis for dashboard
      const res2 = await fetch(`http://127.0.0.1:5000/latest-analysis?resume_id=${resumeId}`, {
        credentials: "include"
      });

      const analysisData = await res2.json();
      if (analysisData.error) {
        console.error(analysisData.error);
        return;
      }

      // === Update dashboard ===
      updateDashboard(analysisData);

    } catch (err) {
      console.error("Error fetching analysis:", err);
    }
  }

  // === Load PDF ===
  async function loadPDF(resumeName) {
    const response = await fetch(`http://127.0.0.1:5000/uploads/${resumeName}`, {
      credentials: 'include'
    });

    if (!response.ok) throw new Error(`Failed to load PDF: ${response.statusText}`);

    const blob = await response.blob();
    const url = URL.createObjectURL(blob);

    document.getElementById('userResumePreview').innerHTML = `
      <iframe src="${url}" width="100%" height="100%" style="border:none;"></iframe>
    `;
  }

  // === Update Dashboard Function ===
  function updateDashboard(data) {
    if (data.ats_score !== undefined) setATS(data.ats_score);
    if (data.missing_keywords) sugKw.textContent = "Add missing keywords: " + data.missing_keywords.join(', ');
    if (data.grammatical_errors) sugGram.textContent = "Grammar issues: " + data.grammatical_errors.join(', ');
    if (data.improvement_tips) sugFmt.textContent = "Tips: " + data.improvement_tips.join(', ');

    // Strength donut

    setDonut(data.Resume_strength || 0);

    // Grammar & formatting
    const grammarScore = data.grammar_accuracy || 0;
    const formattingScore = data.Formatting_quality || 0;
    setMini(gramVal, grammarScore);
    setMini(fmtVal, formattingScore);
    kwVal.textContent = (data.keyword_matches || 0) + '%';
    kwBar.style.width = (data.keyword_matches || 0) + '%';


    // Skill gap
    const skillGap = data.skill_gap || 0;
    skillGapValue.textContent = skillGap + '%';
    skillGapContent.textContent =
      skillGap > 70
        ? "Good match with target job requirements"
        : "Consider adding more relevant skills for target roles";

    // Experience

    const expLevel = data.experience_level;
    expLevelValue.textContent = expLevel;
    expLevelContent.textContent = "Based on roles and duration in your resume";
    expSection.textContent = data.Experience || "No experience details available.";
    titleAI.textContent = data.title || "No title suggestion available.";
    formatingAI.textContent = data.formatting_needed || "No formatting suggestions available.";
   

    keywordsContainer.innerHTML = "";
    data.detected_keyword.forEach(keyword => {
    const div = document.createElement("div");
    div.classList.add("keyword");
    div.textContent = keyword;
    keywordsContainer.appendChild(div);
    });
    // Readability
    const readability = data.readability_Score;
    readabilityValue.textContent = readability + '/100';
    readabilityContent.textContent =
      readability > 7 ? "Easy to read with clear structure" : "Consider simplifying complex sentences";

    // Achievement
    const achievement = data.achievement_impact ?? Math.min(100, strength - 5);
    achievementValue.textContent = achievement + '%';
    achievementContent.textContent =
      achievement > 70 ? "Strong quantifiable achievements" : "Add more metrics and results to your experience";

    // Keywords
    if (data.keywords && Array.isArray(data.keywords)) {
      keywordsContainer.innerHTML = '';
      data.keywords.slice(0, 6).forEach(keyword => {
        const el = document.createElement('div');
        el.className = 'keyword';
        el.textContent = keyword;
        keywordsContainer.appendChild(el);
      });
    }

    if (data.summary) summaryText.textContent = data.summary;
    if (data.last_scanned) lastScanned.textContent = data.last_scanned;
  }

  // === Run on page load ===
  (async () => {
    await fetchLatestAnalysis();
  })();
    </script>

</body>
</html>